# 更新日志

## v1.3.0 - 2025-08-03

### 新增功能
- 🎭 **增强像素小人系统**：
  - 小人位置调整到桌子外侧40-80px距离，视觉层次更清晰
  - 增大小人尺寸(40x50像素)，提供更好的视觉效果
  - 左右两侧小人使用不同颜色（左亮红#FF4444，右亮蓝#44AAFF）
  - 苹果尺寸增大一倍(24px)，更容易识别和击中
  - 击中苹果后小人变大一倍，附带金色发光效果
  - 增强状态下击球速度提升20%，游戏策略性增强
  - 失分后自动恢复正常大小和速度，平衡性机制

- 🌈 **儿童友好开始界面**：
  - 改为VS对战格式显示玩家名字，布局更直观
  - 彩虹渐变游戏标题，动态色彩变化(rainbow动画)
  - 彩色标签和输入框，视觉更活泼生动
  - 增加弹跳(bounce)和脉冲(pulse)动画效果
  - 儿童友好的设计语言和交互体验
  - 所有界面元素统一配色和动画风格

- 🎵 **完整声音系统更新**：
  - 背景音乐：比赛的一天.mp3（替换原Combat02.mp3）
  - 击球音效：hit.mp3（替换原ping.wav）
  - 左侧失球音效：left_lost_mp3.mp3，增强沉浸感
  - 右侧失球音效：right_lost.mp3，区分左右失球
  - 结束一局音效：vector.mp3，胜利庆祝
  - 所有音效都有适当的音量平衡(0.6-0.8)

- 🛠 **构建和部署系统**：
  - 创建build.sh脚本用于JavaScript混淆和压缩
  - 支持自动依赖安装（terser npm包）
  - 文件大小优化，移除调试信息和注释
  - 构建输出到dist目录，便于生产部署
  - 自动复制HTML、音频等所有必要文件
  - 显示压缩前后文件大小对比

### 改进
- 🎮 更精细的角色状态管理和视觉反馈
- 🎨 界面美学全面提升，符合儿童审美
- 🔊 完整的音频体验，每个动作都有对应反馈
- 🏗 专业的构建工具链，支持生产环境部署
- 📱 响应式布局优化，适配不同屏幕尺寸

## v1.2.0 - 2025-08-03

### 新增功能
- 🍎 **随机像素苹果奖励系统**：
  - 游戏中随机生成像素苹果（10-30秒间隔）
  - 击中苹果获得奖励分数，单独显示在计分板
  - 总分 = 常规得分 + 奖励得分
- 🏆 **21分制比赛**：胜利条件从10分提升到21分，增加游戏挑战性
- 📊 **详细比赛统计**：
  - 游戏结束后按D键查看详细统计
  - 显示总比分、常规得分、奖励得分、游戏时长
  - 完整的vs记录分析界面
- 🎵 **持续音乐播放**：背景音乐在整个游戏过程中循环播放，不在游戏结束时停止
- 👾 **俯视角小人重设计**：
  - 小人位置移到桌子外面（画布外侧）
  - 重新设计为俯视角的打球小人形象
  - 更大更详细的像素艺术风格（30x40像素）
  - 独立的动作动画，不再跟随球拍移动
  - 包含头部、身体、手臂持拍、腿部、鞋子等细节
- 🏓 **台球桌大小选择**：
  - 支持标准桌(800x400)和大桌(1000x500)两种尺寸
  - 游戏元素自动适配不同桌子大小
  - 球拍、球、小人位置智能调整
- 🎨 **多种桌面背景**：
  - 5种背景风格：经典绿色、深色模式、海蓝色、木质纹理、霓虹风格
  - 背景图案设计为淡色（透明度0.1）不干扰球的可见性
  - 点状、线条、木纹、网格等不同图案效果

### 改进
- 🎮 增强的用户体验和游戏可玩性
- 🎯 更精细的碰撞检测和物理系统
- 📱 优化的界面布局和视觉效果
- 🔧 代码结构优化，支持动态配置

## v1.1.0 - 2025-08-03

### 新增功能
- 👤 **玩家名字输入**：支持开始时自定义两边玩家名字，右边默认为唐林，左边默认为小鹏友
- 🎨 **球的视觉增强**：
  - 球改为更大的圆形设计（15px直径）
  - 每局球的颜色随机变化为鲜艳颜色（10种颜色）
  - 拖尾效果使用球的动态颜色
- 🔊 **音效系统**：
  - 击球音效（sound/ping.wav），音量调至0.8
  - 背景音乐（sound/Combat02.mp3），音量0.6，循环播放
- 👾 **像素动态小人**：台球桌两边有可爱的像素小人跟随拍子上下移动，带有动态手臂和腿部动画
- ✨ **动态比分显示**：每完成一把显示金色的得分动画，包含放大、淡出和上飘效果
- 📱 **界面优化**：比分板重新布局，显示在桌子上方位置，更加合理美观

### 改进
- 🎮 游戏开始改为按空格键，避免误触发
- 🎵 游戏结束和退出时自动停止背景音乐
- 🎭 音效播放失败时有错误处理，不影响游戏体验

## v1.0.0 - 2025-08-03

### 新增功能
- 🎮 完整的乒乓球游戏实现
- 🎯 开始界面：显示"唐林的乒乓球"游戏标题和操作说明
- 🎮 游戏控制：左侧玩家使用A/Z键，右侧玩家使用上下箭头键
- 📊 实时积分显示：屏幕顶部显示当前比分
- ✨ 球的拖尾光芒效果：增强视觉体验
- ⚡ 球速递增机制：每次碰撞后球速略微增加
- 🏆 胜负判定：先到10分者获胜
- 🔄 游戏结束界面：显示胜者和最终比分，支持重新开始或退出

### 技术特性
- Canvas 2D 渲染
- 响应式键盘控制
- 平滑的动画效果
- 碰撞检测系统
- 游戏状态管理

### 文件结构
```
├── index.html      # 主HTML文件，包含游戏界面
├── game.js         # 游戏核心逻辑
├── todo.list.md    # 原始需求文档
├── done.list.md    # 已完成需求列表
├── changelog.md    # 更新日志（本文件）
├── CLAUDE.md       # 开发指南
└── sound/          # 音效文件夹
    ├── ping.wav    # 击球音效
    └── Combat02.mp3 # 背景音乐
```